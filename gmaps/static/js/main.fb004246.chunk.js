(this["webpackJsonpgmaps-path"]=this["webpackJsonpgmaps-path"]||[]).push([[0],{1:function(t,e,n){t.exports={steps:"style_steps__aHb4N",button:"style_button__1Gbl2",map:"style_map__2mGSF"}},15:function(t,e,n){t.exports=n(36)},20:function(t,e,n){},36:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),o=n(9),i=n.n(o),l=(n(20),n(3)),s=n(4),c=n(6),u=n(5),p=n(7),h=n(10),m=n(1),f=n.n(m),d=function(t){function e(){var t,n;Object(l.a)(this,e);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(c.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(r)))).markerId=1,n.onMarkerClick=function(t,e){var a=n.props,r=a.markers;(0,a.updateMarkers)(r.filter((function(t){return t.id!==e.id})),t.map)},n.onMapClicked=function(t,e,a){var r=n.props,o=r.markers,i=r.updateMarkers;o.push({lat:a.latLng.lat(),lng:a.latLng.lng(),name:"Marker ".concat(n.markerId),id:n.markerId}),n.markerId++,i(o,e,t.google)},n}return Object(p.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){var t=this,e=this.props,n=e.loaded,a=e.google,o=e.markers;return n?r.a.createElement(h.Map,{className:f.a.map,google:a,onClick:this.onMapClicked,style:{height:"100%",position:"relative",width:"100%"},zoom:14},o.map((function(e){return r.a.createElement(h.Marker,{key:e.name,name:e.name,id:e.id,onClick:t.onMarkerClick,position:{lat:e.lat,lng:e.lng}})}))):r.a.createElement("div",null,"Loading...")}}]),e}(a.Component),g=Object(h.GoogleApiWrapper)({apiKey:"GOOGLE_API_KEY"})(d),k=function(t){function e(){var t,n;Object(l.a)(this,e);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(c.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(r)))).state={algorithm:"shortest"},n.handleChange=function(t){return n.setState({algorithm:t.target.value})},n}return Object(p.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){var t=this,e=this.props,n=e.step,o=e.markers,i=e.runIteration,l=this.state.algorithm;return r.a.createElement("div",{className:f.a.steps},r.a.createElement("h2",null,"Shortest distance calculator"),1===n&&r.a.createElement("p",null,"Click on map to drop markers in various spots on the map",r.a.createElement("br",null),r.a.createElement("u",null,"You have to select minimum 3 markers in order for algorithms to work."),r.a.createElement("br",null),r.a.createElement("p",null,"If you click on selected marker then it will be removed."),r.a.createElement("p",null,"List of all your markers:"),o&&o.map((function(t){return r.a.createElement(a.Fragment,{key:t.id},r.a.createElement("u",null,"Lat: ",t.lat,", Lng: ",t.lng),r.a.createElement("br",null))})),o&&r.a.createElement("button",{disabled:o<3,className:f.a.button,onClick:this.props.increaseStep},"Continue")),2===n&&r.a.createElement("p",null,"Now that you have selected all the markers, please choose wanted algorithm:",r.a.createElement("br",null),r.a.createElement("select",{value:l,onChange:this.handleChange},r.a.createElement("option",{value:"shortest"},"Shortest Path (always select shortest distance between markers)"),r.a.createElement("option",{value:"bruteforce"},"Brute Force (check all possible paths)")),r.a.createElement("br",null),i&&r.a.createElement("button",{className:f.a.button,onClick:this.props.stopIteration},"STOP"),!i&&r.a.createElement("button",{className:f.a.button,onClick:function(){return t.props.startIteration(l)}},"Run")))}}]),e}(a.Component),b=n(14),v=function(t,e,n,a){var r=function(t){return t*(Math.PI/180)},o=r(n-t),i=r(a-e),l=Math.sin(o/2)*Math.sin(o/2)+Math.cos(r(t))*Math.cos(r(n))*Math.sin(i/2)*Math.sin(i/2);return 6371*(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)))},y=function(t){return t.forEach((function(e,n){var a=[];t.forEach((function(t){t.id!==e.id&&a.push({id:t.id,distance:v(e.lat,e.lng,t.lat,t.lng)})})),t[n]=Object(b.a)({},e,{distances:a})})),t},E=n(13),M=function(t){return t.map((function(t){return{lat:t.lat,lng:t.lng}}))},O=function(t){return t.reduce((function(t,e,n){return n?{id:e.id,distance:t.distance+e.distances.find((function(e){return e.id===t.id})).distance}:{id:e.id,distance:0}}),0)},I=function(t){var e=[],n=[];e.push(t[0]);for(var a=function(a){var r=99999,o=-1,i=function(){return M(e)};e.length>1&&n.push([i()]),t.find((function(t){return t.id===e[e.length-1].id})).distances.forEach((function(a){if(!e.find((function(t){return a.id===t.id}))){var l=t.find((function(t){return t.id===a.id}));n.push([i(),[].concat(Object(E.a)(i()),[{lat:l.lat,lng:l.lng}])]),r>a.distance&&(r=a.distance,o=a.id)}})),e.push(t.find((function(t){return t.id===o})))},r=1;r<t.length;r++)a();return console.log(O(e).distance),{shortestPath:e,polylineSearch:n}},j=function(t){var e=function(t){var e=[],n=t.slice(),a=function(t,e){var a=n[t];n[t]=n[e],n[e]=a};return function t(n,r){if(1==n)e.push(r.slice());else for(var o=0;o<=n-1;o++)t(n-1,r),a(n%2==0?o:0,n-1)}(n.length,n),e}(t.slice(1)),n=99999,a=[],r=[];return e.forEach((function(e){e.unshift(t[0]),r.push([M(e)]);var o=O(e).distance;n>o&&(n=o,a=e)})),r.push([M(a)]),{bestDistance:n,shortestPath:a,polylineSearch:r}},C=function(t){function e(){var t,n;Object(l.a)(this,e);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(c.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(r)))).state={markers:[],step:1,runIteration:!1},n.map=null,n.google=null,n.polylines=null,n.timeouts=[],n.calculatePath=function(t){var e=n.state.markers;if("shortest"===t){var a=I(e).polylineSearch;n.drawPolyline(a)}else if("bruteforce"===t){var r=j(e).polylineSearch;n.drawPolyline(r)}},n.drawPolyline=function(t){n.clearPolylines();var e=0;t.forEach((function(t){t.forEach((function(t){n.timeouts.push(setTimeout((function(){n.clearPolylines(),n.state.runIteration&&(n.polylines=new n.google.maps.Polyline({path:t,geodesic:!0,strokeColor:"#FF0000",strokeOpacity:1,strokeWeight:2}),n.polylines.setMap(n.map))}),200*e)),e++}))})),n.timeouts.push(setTimeout((function(){return n.stopIteration()}),200*e))},n.clearPolylines=function(){return n.polylines?n.polylines.setMap(null):null},n.updateMarkers=function(t,e,a){n.map=e,n.google=a,n.setState({markers:t})},n.increaseStep=function(){return n.setState({step:++n.state.step})},n.startIteration=function(t){n.setState({runIteration:!0}),y(n.state.markers),n.calculatePath(t)},n.stopIteration=function(){for(var t=0;t<n.timeouts.length;t++)clearTimeout(n.timeouts[t]);for(;n.timeouts.length;)n.timeouts.pop();n.setState({runIteration:!1})},n}return Object(p.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){var t=this.state.markers;return r.a.createElement(a.Fragment,null,r.a.createElement(k,Object.assign({increaseStep:this.increaseStep,startIteration:this.startIteration,stopIteration:this.stopIteration},this.state)),r.a.createElement(g,{markers:t,google:this.props.google,updateMarkers:this.updateMarkers}))}}]),e}(a.Component);i.a.render(r.a.createElement(C,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.fb004246.chunk.js.map